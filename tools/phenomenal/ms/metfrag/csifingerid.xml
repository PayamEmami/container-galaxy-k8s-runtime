<?xml version='1.0' encoding='UTF-8'?>
<!--This is a configuration file for the integration of a tools into Galaxy (https://galaxyproject.org/).-->
<!--Proposed Tool Section: [PhenoMeNal]-->
<tool id="csifingerid" name="csifingerid" version="0.1">
<!--   <requirements>
        <container type="docker">container-registry.phenomenal-h2020.eu/phnmnl/container-csifingerid</container>
  </requirements>-->
  <description>Run CSI:FingerID with a given parameter set.</description>
  <command><![CDATA[
  
  /usr/local/bin/fingerID.r input=$input 
realName=$input.name  
tryOffline=$tryOffline 
output=$output 
    #if $ppm != "None"
        ppm=$ppm 
    #end if
	#if $database != "None"
        database="$database" 
    #end if
	#if $ionization != "None"
    ionization=$ionization 
    #end if
	;
  ]]>
  </command>
  <inputs>
    <param name="input" type="data" format="txt" optional="False" label="File with MetFrag parameters" help="File containing MetFrag parameters which is generated by msms2metfrag" />

	   <param name="database" type="select" value="None" optional="True" label="database" help="database (this will overwrite the corresponding parameter in the input file). CSI:FingerID does not have LocalCSV. So if you set this in the previous step, change this to your desired database" >
	  <option value="None" selected="True">None</option>
	  <option value="all" selected="False">all</option>
	  <option value="chebi" selected="False">chebi</option>
	  <option value="custom" selected="False">custom</option>
	  <option value="kegg" selected="False">kegg</option>
	  <option value="bio" selected="False">bio</option>
	  <option value="natural products" selected="False">natural products</option>
	  <option value="pubmed" selected="False">pubmed</option>
	  <option value="hmdb" selected="False">hmdb</option>
	  <option value="biocyc" selected="False">biocyc</option>
	  <option value="hsdb" selected="False">hsdb</option>
      <option value="knapsack" selected="False">knapsack</option>
	  <option value="biological" selected="False">biological</option>
	  <option value="zinc bio" selected="False">zinc bio</option>
	  <option value="gnps" selected="False">gnps</option>
	  <option value="pubchem" selected="False">pubchem</option>
	  <option value="mesh" selected="False">mesh</option>
	  <option value="maconda" selected="False">maconda</option>
    </param>
	<param name="ppm" type="text" format="txt" value="" optional="True" label="Precursor PPM" help="The ppm error for the precursor mass to search candidates (this will overwrite the corresponding parameter in the input file)" />
    <param name="tryOffline" type="select" value="Yes" optional="False" label="tryOffline" help="If only database is not available, try the offline one (recommended)" >
      <option value="T" selected="True">Yes</option>
      <option value="F" selected="False">No</option>
    </param>
	   <param name="ionization" type="select" value="" optional="True" label="ionization" help="Ion mode for the data acquisition for this sample (this will overwrite the corresponding parameter in the input file)" >
	  <option value="pos" selected="False">pos</option>
      <option value="neg" selected="False">neg</option>
    </param>
	
  </inputs>
  <outputs>
    <data name="output" type="text" format="csv" label="CSV result file" />
  </outputs>
  <help>

.. class:: infomark

| **Tool update: See the 'NEWS' section at the bottom of the page**

---------------------------------------------------

.. class:: infomark

**Authors**

| **Payam Emami (payam.emami@medsci.uu.se)** wrote and maintains this wrapper for CSI:FingerID identification.

---------------------------------------------------

.. class:: infomark

**Please cite**

Kai Dührkop, Huibin Shen, Marvin Meusel, Juho Rousu, and Sebastian Böcker. Searching molecular structure databases with tandem mass spectra using CSI:FingerID. Proc Natl Acad Sci U S A, 112(41):12580-12585, 2015. (cite this when using CSI:FingerID)
.. class:: infomark

**References**

| Kai Dührkop, Huibin Shen, Marvin Meusel, Juho Rousu, and Sebastian Böcker. Searching molecular structure databases with tandem mass spectra using CSI:FingerID. Proc Natl Acad Sci U S A, 112(41):12580-12585, 2015. (cite this when using CSI:FingerID)

---------------------------------------------------

=====================
CSI:FingerID
=====================

-----------
Description
-----------

| This module is used to run MetFrag on annotated MS/MS spectra for compound annotation. The parameters are set by **msms2metfrag**.

+------------------+-----------------+
| predecessor tool | successor tool  |
+------------------+-----------------+
| msms2metfrag     | aggregatemetfrag|
+------------------+-----------------+

-----------
Input files
-----------

+------------------------------+------------+
| File                         |   Format   |
+==============================+============+
| 1)  File with MetFrag        |    txt     |
|     parameters               |            |
+------------------------------+------------+


----------
Parameters
----------

File with MetFrag parameters
        | File containing MetFrag parameters which is generated by **msms2metfrag**
        |

database
        | This has to be one of the several databases supported by CSI:FingerID. IMPORTANT: If "None" is selected, the database in the input file will be used for identification.
        | But at the moment, this wrapper does not accept
		|
		
tryOffline
	| This parameter controls if the tool should use the offline dataset or not. 
	| 

ppm
	| This will overwrite the precursor m/z tolerance in parameter file
	|

ionization
	| This will overwrite the ionization mode in parameter file. Set "None" to use the ionization from the parameter file.
	|
	

------------
Output files
------------

output
        | A csv output file with scored candidates and properties
        |

---------------------------------------------------

----
NEWS
----


CHANGES IN VERSION 0.1
========================

First version

  </help>
</tool>
